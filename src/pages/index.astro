---
import BaseHead from '../components/BaseHead.astro';
import CardLayout from '../components/CardLayout.astro';
// Footer removed
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { ConvexHttpClient } from 'convex/browser';
import { api } from '../../convex/_generated/api';
import { marked } from 'marked';
export const prerender = false;

const siteSlug = import.meta.env.DEFAULT_SITE_SLUG || '';
let homeContent: any = null;
try {
  const client = new ConvexHttpClient(import.meta.env.CONVEX_URL || import.meta.env.PUBLIC_CONVEX_URL);
  if (siteSlug) homeContent = await client.query(api.pages.getByKey, { siteSlug, key: 'home' });
} catch {}
const homeHtml = homeContent ? marked.parse(homeContent.content || '') : null;
---

<!doctype html>
<html lang="en" data-theme="dark">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<CardLayout>
				<main>
					{homeHtml ? (
						<div class="prose" set:html={homeHtml} />
					) : (
					<div class="intro mb-8">
						<h1 class="text-primary mb-2">ðŸ‘‹ Hey, I'm Ashvin</h1>
						<p class="sub text-muted">Builder, thinker, and creator.</p>
					</div>
				<p>
					Welcome to my corner of the internet! I'm a builder, thinker, and creator passionate about 
					technology, design, and the messy beautiful process of bringing ideas to life.
				</p>
				<p>
					This is where I share my thoughts, experiments, and the things I'm learning along the way. 
					From code to creativity, business to personal growth - it's all here.
				</p>
				<h2>What you'll find here</h2>
				<ul>
					<li><strong>Thoughts & Ideas:</strong> My take on technology, startups, and life</li>
					<li><strong>Projects:</strong> Things I'm building and experimenting with</li>
					<li><strong>Learning:</strong> Lessons from the journey of building things</li>
					<li><strong>Resources:</strong> Tools and insights I find useful</li>
				</ul>
				<p>
					Feel free to explore, and if something resonates with you, I'd love to hear about it. 
					You can find me on the various platforms linked above.
				</p>
					<style>
						.intro .sub { margin: 0; font-size: 1rem; line-height: 1.4; }
					</style>
					)}
				</main>
		</CardLayout>
	</body>
</html>
