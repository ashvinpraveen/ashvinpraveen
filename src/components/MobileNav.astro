---
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');
const root = pathname.split('/').filter(Boolean)[0] || '';
const isActive = (href: string) => {
  if (href === '/') return pathname === '/';
  return ('/' + root) === href;
};
---

<nav class="mobile-nav" aria-label="Bottom navigation">
  <a href="/" class:list={[ 'item', { active: isActive('/') } ]}>
    <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 3l9 8h-3v9h-5v-6H11v6H6v-9H3l9-8z"/></svg>
    <span>Home</span>
  </a>
  <a href="/blog" class:list={[ 'item', { active: isActive('/blog') } ]}>
    <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M5 4h14a1 1 0 011 1v14l-4-3H5a1 1 0 01-1-1V5a1 1 0 011-1z"/></svg>
    <span>Blog</span>
  </a>
  <a href="/about" class:list={[ 'item', { active: isActive('/about') } ]}>
    <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 12a5 5 0 10-5-5 5 5 0 005 5zm-7 9a7 7 0 0114 0z"/></svg>
    <span>About</span>
  </a>
</nav>

<style>
  .mobile-nav {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);
    width: calc(100% - 2rem);
    max-width: 520px;
    display: none;
    background: hsl(0 0% 0% / 0.45);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--color-border-subtle);
    border-radius: 16px;
    box-shadow: 0 8px 30px hsl(0 0% 0% / 0.2), 0 4px 10px hsl(0 0% 0% / 0.12);
    padding: 0.25rem;
    z-index: 60;
  }
  .item {
    flex: 1 1 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    color: var(--typography-muted);
    text-decoration: none;
    padding: 0.5rem 0.25rem;
    font-size: 0.75rem;
  }
  .item span { line-height: 1; }
  .item.active { color: var(--typography-link-hover); }
  .item:hover { color: var(--typography-link); }

  @media (max-width: 720px) {
    .mobile-nav { display: flex; justify-content: space-around; }
  }
</style>

